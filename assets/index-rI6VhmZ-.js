(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function o(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(s){if(s.ep)return;s.ep=!0;const r=o(s);fetch(s.href,r)}})();const L=document.getElementById("game__area"),q=document.querySelector(".grid-container");if(!L||!q)throw new Error("Game map not found");const b=(t,e,o,l=!1,s=700,r=20)=>{let c=0;const a=setInterval(()=>{if(c>r){clearInterval(a);return}const i=document.querySelector(`.${t}`);i&&i.remove();let d;l?d=H(t):(d=document.createElement("div"),d.classList.add(t)),d.style.left=`${Math.floor(Math.random()*o)}%`,d.style.top=`${Math.floor(Math.random()*e)}%`,L.appendChild(d),c+=1},s)},H=t=>{const e=document.createElement("img");return e.src=`../assets/images/${t}.webp`,e.classList.add(t),e},u=(t,e,o,l=5,s=10,r=.5,c=!1)=>{for(let a=1;a<e+1;a++){let i;c?i=H(t):(i=document.createElement("div"),i.classList.add(t)),o==="H"?(i.style.left=`${a*l}%`,i.style.top=`${s}%`):(i.style.left=`${l}%`,i.style.top=`${a*s}%`),L.appendChild(i),M(i,o,r)}},M=(t,e,o)=>{let l=1;const s=()=>{let r;e==="V"?r=parseFloat(t.style.top):r=parseFloat(t.style.left),(r>120||r<-20)&&(l*=-1),e==="V"?t.style.top=`${r+o*l}%`:t.style.left=`${r+o*l}%`,requestAnimationFrame(s)};s()},m=document.querySelector("#hit"),p=document.querySelector("#gunshot"),h=document.querySelector("#glasshit"),g=document.querySelector("#ufohit");if(!p||!m||!h||!g)throw new Error("Sound effect not found");const $=()=>{m.volume=.2,m.currentTime=0,m.play()},I=()=>{p.volume=.1,p.currentTime=0,p.play()},O=()=>{h.volume=.2,h.currentTime=0,h.play()},x=()=>{g.volume=.4,g.currentTime=0,g.play()},n=document.getElementById("game__area"),C=document.querySelector("#score__card--points"),w=document.querySelector("#score__card--multiplier"),y=document.querySelector("#score__card--timer"),E=document.querySelector("#start__button");if(!n)throw new Error("Game map not found");if(!E)throw new Error("Start button not found");if(!C||!w||!y)throw new Error("Score card not found");let f=null;const A=t=>e=>{const o=e.target;t.shots+=1,I(),o.classList.contains("target")?(F(t),o.remove()):o.classList.contains("bottle")?(V(t),o.remove()):o.classList.contains("ufo")?(B(t),o.remove()):o.classList.contains("sp-target")?(N(t),o.remove()):t.hits=0},v=t=>{t.hits>10?t.multiplier=5:t.hits>3?t.multiplier=2:t.multiplier=1,w.innerText=`Multiplier: x${t.multiplier}`},_=()=>{T(),E.innerText="Restart",y.style.color="white",P()},T=()=>{for(;n.firstChild;)n.removeChild(n.firstChild);f&&(n.removeEventListener("click",f),f=null)},P=()=>{const t={score:0,shots:0,hits:0,multiplier:1};f=A(t),n.addEventListener("click",f),K(t),u("target",5,"H",10,30),u("bottle",20,"H",7,93.5,.7,!0),u("target",5,"V",5,15),u("target",5,"V",80,15),u("target",10,"H",10,70),setTimeout(()=>{b("ufo",90,90,!0,800)},3e4),setTimeout(()=>{u("target",10,"H",7,5)},1e4)},F=t=>{$(),t.score+=10*t.multiplier,v(t),t.hits+=1,S(t)},B=t=>{x(),t.score+=200*t.multiplier,v(t),t.hits+=1,S(t)},V=t=>{O(),t.score+=20*t.multiplier,v(t),t.hits+=1,S(t)},N=t=>{$(),t.score+=50*t.multiplier,v(t),t.hits+=1,S(t)},S=t=>{C.textContent=`Score: ${t.score}`},K=t=>{let e=60;const o=setInterval(()=>{e<=0?(clearInterval(o),R(t)):(e-=1,y.textContent=`Time: ${e}`,e<=10&&(y.style.color="red"))},1e3)},R=t=>{alert(`Game Over! Your score is ${t.score}`),T();const e=document.createElement("h1");e.classList.add("final__score"),e.textContent=`Final Score: ${t.score}`;const o=document.createElement("button");o.classList.add("button"),o.textContent="Play Again",o.addEventListener("click",_),n.innerHTML="",n.appendChild(e),n.appendChild(o)};E.addEventListener("click",_);
